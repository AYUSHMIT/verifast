<html>
<head>
<title>VeriFast Examples</title>
<style>
p {margin: 0 10pt; text-indent: -10pt; padding: 0}
blockquote {margin: 0 10pt; padding: 0}
</style>
</head>
<body>
<h1>VeriFast Examples</h1>
<p><a href="counter.c.html">counter.c</a> - An introductory example. A simple counter module (without abstraction) and a client program.</p>
<p><a href="counter_with_pred.c.html">counter_with_pred.c</a> - The same counter, now using abstraction.</p>
<p><a href="args.c.html">args.c</a> - Prints the command-line arguments to the console. Shows a way to deal with arrays.</p>
<p><a href="chat.c.html">chat.c</a> - A chat server. Demonstrates the use of threads, locks, sockets, lists.</p>
<p><a href="lists.h.html">lists.h</a> - Specification of a list module</p>
<p><a href="lists.c.html">lists.c</a> - Implementation of the list module</p>
<p><a href="sockets.h.html">sockets.h</a> - Specification of the sockets module (a wrapper around the Win32/*nix sockets API)</p>
<p><a href="sockets.vfmanifest">sockets.vfmanifest</a> - Manifest file for the sockets module</p>
<p><a href="stringBuffers.h.html">stringBuffers.h</a> - Specification of the string buffers module</p>
<p><a href="stringBuffers.c.html">stringBuffers.c</a> - Implementation of the string buffers module. Demonstrates the use of character arrays and strings.</p>
<p><a href="threading.h.html">threading.h</a> - A specification of a threading module (a wrapper around the Win32/*nix threading API)</p>
<p><a href="threading.vfmanifest">threading.vfmanifest</a> - Manifest file for the threading module</p>
<p><b>chatbot</b> - A chat bot (= an automated client for the above chat server)</p>
<blockquote>
<p><a href="chatbot/bot.c.html">bot.c</a> - The chat bot<p>
</blockquote>
<p><a href="composite4.c.html">composite4.c</a> - Demonstrates an approach for verifying instances of the Composite pattern in VeriFast.
See Bart Jacobs, Jan Smans, and Frank Piessens.
<a href="http://www.cs.kuleuven.be/~bartj/verifast/composite.pdf">Verifying the Composite Pattern using Separation Logic</a>. SAVCBS 2008 Challenge problem track.</p>
<p><a href="contrib.c.html">contrib.c</a> - Starts two threads that share a counter and that each increment the counter; then joins both threads and asserts that the counter's value equals 2.
Demonstrates shared boxes. Note: This program can be verified more simply using ghost fields.
See Bart Jacobs and Frank Piessens.
<a href="http://www.cs.kuleuven.be/publicaties/rapporten/cw/CW549.abs.html">Dynamic Owicki-Gries reasoning using ghost fields and fractional permissions</a>.
Technical Report CW-549, Department of Computer Science, Katholieke Universiteit Leuven, Belgium. June 2009.</p>
<p><a href="expr.c.html">expr.c</a> - Builds a simple expression AST, evaluates it, and disposes it.
Demonstrates a way to implement inductive datatypes in C and verify them with VeriFast.</p>
<p><a href="fractions-counting.c.html">fractions-counting.c</a> - Shows how counting permissions can easily be integrated into VeriFast in the form of a library.</p>
<p><a href="ghost_field.c.html">ghost_field.c</a> - Simple ghost fields test.</p>
<p><a href="goto.c.html">goto.c</a> - Demonstrates VeriFast's support for goto statements.</p>
<p><a href="ifs.c.html">ifs.c</a> -
Demonstrates how invariant statements can be used to solve the problem of exponential verification time in the presence of many independent if statements in a function.</p>
<p><b>incr_box</b> - A program where one thread continually increments a shared counter and another reads the counter twice and asserts that the second value is not less than the first value.
Demonstrates shared boxes.</p>
<blockquote>
<p><a href="incr_box/incr_box.c.html">incr_box.c</a> - The program</p>
<p><a href="incr_box/threading.h.html">threading.h</a> - Specification of the threading module</p>
<p><a href="incr_box/threading.vfmanifest">threading.vfmanifest</a> - Manifest file of the threading module</p>
</blockquote>
<p><a href="iter.c.html">iter.c</a> - Linked lists with iterators. There may be many iterators on a given list. Demonstrates fractional permissions and VeriFast's
support for merging of fractions of precise predicates.</p>
<p><b>java</b> - Java examples.
See Cedric Cuypers, Bart Jacobs, and Frank Piessens.
<a href="http://www.cs.kuleuven.be/publicaties/rapporten/cw/CW550.abs.html">Verification of data-race-freedom of a Java chat server with VeriFast</a>.
Technical Report CW-550, Department of Computer Science, Katholieke Universiteit Leuven, Belgium.</p>
<blockquote>
<p><b>chat</b> - Java version of the chat server</p>
<blockquote>
<p><a href="java/chat/Member.java.html">Member.java</a></p>
<p><a href="java/chat/Room.java.html">Room.java</a></p>
<p><a href="java/chat/Session.java.html">Session.java</a></p>
<p><a href="java/chat/Program.java.html">Program.java</a></p>
<p><a href="java/chat/chat.jarsrc">chat.jarsrc</a></p>
</blockquote>
<p><a href="java/Contrib.java.html">Contrib.java</a> - Java version of the contrib.c example</p>
<p><a href="java/Counter.java.html">Counter.java</a> - Simple introductory example</p>
<p><a href="java/hello.scala.html">hello.scala</a> - A tiny Scala example. Note: VeriFast's support for Scala is currently limited to essentially this example.</p>
<p><b>Iterator</b> - A Java program consisting of multiple jar files
<blockquote>
<p><a href="java/Iterator/it.jarspec">it.jarspec</a> - Specification of the it module</p>
<p><a href="java/Iterator/it.jarsrc">it.jarsrc</a> - Implementation of the it module</p>
<p><a href="java/Iterator/Iterator.java.html">Iterator.java</a> - Source file belonging to the it module implementation</p>
<p><a href="java/Iterator/Iterator.javaspec.html">Iterator.javaspec</a> - Source file belonging to the it module specification</p>
<p><a href="java/Iterator/IteratorUtil.java.html">IteratorUtil.java</a> - Source file belonging to the it module implementation</p>
<p><a href="java/Iterator/IteratorUtil.javaspec.html">IteratorUtil.javaspec</a> - Source file belonging to the it module specification</p>
<p><a href="java/Iterator/prog.jarsrc">prog.jarsrc</a> - Implementation of the prog module</p>
<p><a href="java/Iterator/Program.java.html">Program.java</a> - Source file belonging to the prog module implementation</p>
<p><a href="java/Iterator/SingletonIterator.java.html">SingletonIterator.java</a> - Source file belonging to the it module implementation</p>
<p><a href="java/Iterator/SingletonIterator.javaspec.html">SingletonIterator.javaspec</a> - Source file belonging to the it module specification</p>
</blockquote>
<p><a href="java/Iterator.java.html">Iterator.java</a> - Demonstrates dynamic binding in Java</p>
<p><a href="java/Map.java.html">Map.java</a> - Full functional specification and verification of a higher-order function: the map function known from functional programming</p>
<p><a href="java/Tree.java.html">Tree.java</a> - Full functional specification and verification of binary search tree implementation (not self-balancing)</p>
</blockquote>
<p><b>lcset</b> - A concurrent set data structure implemented as a sorted linked list with hand-over-hand locking</p>
<blockquote>
<p><a href="lcset/ghost_lists.h.html">ghost_lists.h</a> - Auxiliary objects that track a list</p>
<p><a href="lcset/atomics.h.html">atomics.h</a> - Specification of atomic machine instructions</p>
<p><a href="lcset/locks.h.html">locks.h</a> - Specification of the spinlocks module. A thin layer over the atomic instructions</p>
<p><a href="lcset/locks.c.html">locks.c</a> - Implementation and proof of the spinlocks module</p>
<p><a href="lcset/lcset.h.html">lcset.h</a> - Specification of the lock-coupling set module</p>
<p><a href="lcset/lcset.c.html">lcset.c</a> - Implementation and proof of the lock-coupling set module</p>
<p><a href="lcset/lcset_client.c.html">lcset_client.c</a> - A trivial client program. TODO: Write one that relies on functional properties</p>
</blockquote>
<p><a href="lemmafuncptr.c.html">lemmafuncptr.c</a> - Simple lemma function pointers test</p>
<p><a href="map.c.html">map.c</a> - Full functional specification and verification of a higher-order function: the map function known from functional programming</p>
<p><b>mcas</b> - Full functional specification and verification of a challenging lock-free algorithm from the literature: Harris et al.'s
multiple-compare-and-swap (MCAS) algorithm. The proof approach was heavily inspired by the one in Vafeiadis' PhD, but uses the approach described in
<a href="http://www.cs.kuleuven.be/publicaties/rapporten/cw/CW551.abs.html">CW-551</a> instead of rely-guarantee. (TODO: Verification of the many
"trivial" lemmas used in the proof that have not yet been verified.)</p>
<blockquote>
<p><a href="mcas/bitops.h.html">bitops.h</a> - A few lemmas about bitwise operations</p>
<p><a href="mcas/atomics.h.html">atomics.h</a> - Specification of atomic machine instructions (atomic loads and atomic (single) compare-and-swaps).
You can create a "prophecy" [Abadi and Lamport] to know the value that will be read in advance. You can use a "tracked CAS" in order to predict
the value that will be written by a successful CAS operation.</p>
<p><a href="mcas/listex.h.html">list.h</a> - Mathematical lists and "iterated star" (foreach) predicates over lists</p>
<p><a href="mcas/pair.h.html">pair.h</a> - Pairs</p>
<p><a href="mcas/assoc_list.h.html">assoc_list.h</a> - Association lists and foreach predicates over association lists</p>
<p><a href="mcas/ghost_cells.h.html">ghost_cells.h</a> - Dynamically allocated auxiliary variables, including ones that use counting permissions</p>
<p><a href="mcas/ghost_counters.h.html">ghost_counters.h</a> - An auxiliary object that holds a monotonically increasing integer</p>
<p><a href="mcas/ghost_lists.h.html">ghost_lists.h</a> - Auxiliary objects holding lists</p>
<p><a href="mcas/rdcss.h.html">rdcss.h</a> - Specification of a module that implements Harris et al.'s Restricted Double Compare Single Swap algorithm, which is
part of the MCAS algorithm</p>
<p><a href="mcas/rdcss.c.html">rdcss.c</a> - Implementation and proof of the RDCSS algorithm</p>
<p><a href="mcas/mcas.h.html">mcas.h</a> - Specification of the MCAS module</p>
<p><a href="mcas/mcas.c.html">mcas.c</a> - Implementation and proof of the MCAS module</p>
<p><a href="mcas/mcas_client.c.html">mcas_client.c</a> - An minimal example client program, that uses MCAS to increment a pair of integers atomically</p>
</blockquote>
<p><a href="odd_even_lemmas.c.html">odd_even_lemmas.c</a> - Demonstrates how mutual lemma recursion is possible</p>
<p><a href="polytest.c.html">polytest.c</a> - Test of VeriFast's support for abstracting inductive datatypes, fixpoint functions, and lemmas over types</a></p>
<p><b>queue</b> - Full functional specification and verification of a lock-free queue implementation and an example client program.
See Bart Jacobs and Frank Piessens.
<a href="http://www.cs.kuleuven.be/publicaties/rapporten/cw/CW551.abs.html">Modular full functional specification and verification of lock-free data structures</a>.
Technical Report CW-551, Department of Computer Science, Katholieke Universiteit Leuven, Belgium. June 2009.</p>
<blockquote>
<p><a href="queue/atomics.h.html">atomics.h</a> - Specification of the atomic operations library</p>
<p><a href="queue/atomics.vfmanifest">atomics.vfmanifest</a> - Manifest of the atomic operations library</p>
<p><a href="queue/ghost_cells.h.html">ghost_cells.h</a> - Specification of the ghost cells library</p>
<p><a href="queue/ghost_cells.vfmanifest">ghost_cells.vfmanifest</a> - Manifest of the ghost cells library</p>
<p><a href="queue/listex.h.html">list.h</a> - Pure lists</p>
<p><a href="queue/queue.c.html">queue.c</a> - The queue implementation</p>
<p><a href="queue/queue.h.html">queue.h</a> - The queue specification</p>
<p><a href="queue/queue_client.c.html">queue_client.c</a> - The example client</p>
<p><a href="queue/threading.h.html">threading.h</a> - Specification of the threading library</p>
<p><a href="queue/threading.vfmanifest">threading.vfmanifest</a> - Manifest of the threading library</p>
</blockquote>
<p><a href="sorted_bintree.c.html">sorted_bintree.c</a> - Full function specification and verification of a binary search tree (not self-balancing)</p>
<p><a href="stack.c.html">stack.c</a> - Example of a deep collection: a stack which owns its items. Demonstrates predicate families.</p>
<p><a href="swap.c.html">swap.c</a> - Example demonstrating the support for taking the address of a field</p>
</body>
</html>
